{"ast":null,"code":"import \"../Firebase\";\nimport router from \"../router\"; // @click=\"CheckOutProducts\"\n\nimport { addDoc, collection, query, getFirestore, onSnapshot } from \"firebase/firestore\";\nconst db = getFirestore();\nconst q = query(collection(db, \"Checkout\"));\nconst authusers = query(collection(db, \"users\"));\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nvar today = new Date();\nvar now_date = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate();\nconst auth = getAuth();\nexport default {\n  name: \"CartView\",\n\n  data() {\n    return {\n      uid: localStorage.getItem(\"uidUser\"),\n      CheckAuth: null\n    };\n  },\n\n  computed: {\n    totalPrice() {\n      let total = 0;\n\n      for (let item of this.$store.state.cart) {\n        total += item.totalPrice;\n      }\n\n      total = total + 7;\n      return total.toFixed(2);\n    }\n\n  },\n  methods: {\n    addToCart(item) {\n      this.$store.commit(\"addToCart\", item);\n      console.log(item);\n    },\n\n    removeFromCart(item) {\n      this.$store.commit(\"removeFromCart\", item);\n    },\n\n    decrementQuentity(item) {\n      this.$store.commit(\"decrementQuentity\", item);\n    },\n\n    CheckOutProducts() {\n      onSnapshot(authusers, querySnapshot => {\n        querySnapshot.forEach(doc => {\n          if (doc.data().uid == this.uid) {\n            addDoc(q, {\n              name: doc.data().name,\n              number: doc.data().number,\n              address: doc.data().address,\n              date: now_date,\n              total: this.totalPrice,\n              cart: this.$store.state.cart\n            }).then(() => {\n              this.$store.commit(\"resetCart\");\n            });\n          }\n        });\n      });\n    },\n\n    CreateAccount() {\n      router.push(\"/signin\");\n      document.getElementById(\"close1\").click();\n    },\n\n    Login() {\n      router.push(\"/login\");\n      document.getElementById(\"close1\").click();\n    }\n\n  },\n\n  created() {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.CheckAuth = user;\n      } else {\n        this.CheckAuth = null;\n      }\n    });\n  }\n\n};","map":{"version":3,"mappings":"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","names":["router","addDoc","collection","query","getFirestore","onSnapshot","db","q","authusers","getAuth","onAuthStateChanged","today","Date","now_date","getFullYear","getMonth","getDate","auth","name","data","uid","localStorage","getItem","CheckAuth","computed","totalPrice","total","item","$store","state","cart","toFixed","methods","addToCart","commit","console","log","removeFromCart","decrementQuentity","CheckOutProducts","querySnapshot","forEach","doc","number","address","date","then","CreateAccount","push","document","getElementById","click","Login","created","user"],"sourceRoot":"","sources":["C:\\Users\\muham\\OneDrive\\Masaüstü\\project\\Online-Store\\src\\views\\Cart.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <section class=\"h-100 h-custom\">\r\n      <div class=\"container h-100 py-5\">\r\n        <div\r\n          v-if=\"$store.state.cart.length > 0\"\r\n          class=\"row d-flex justify-content-center align-items-center h-100\"\r\n        >\r\n          <div class=\"col\">\r\n            <div class=\"table-responsive\">\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\" class=\"h5\">Shopping Bag</th>\r\n\r\n                    <th scope=\"col\">Quantity</th>\r\n                    <th scope=\"col\">Price</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in $store.state.cart\" :key=\"item.name\">\r\n                    <th scope=\"row\" class=\"border-bottom-0\">\r\n                      <div class=\"d-flex align-items-center\">\r\n                        <img\r\n                          :src=\"item.image\"\r\n                          class=\"img-fluid rounded-3\"\r\n                          style=\"width: 83px; height: 112px\"\r\n                          alt=\"Book\"\r\n                        />\r\n                        <div class=\"flex-column ms-4\">\r\n                          <p class=\"mb-2\">\r\n                            {{ item.name }}\r\n                          </p>\r\n                          <p class=\"mb-0\">{{ item.brand }}</p>\r\n                        </div>\r\n                      </div>\r\n                    </th>\r\n\r\n                    <td class=\"align-middle border-bottom-0\">\r\n                      <div class=\"d-flex flex-row\">\r\n                        <button\r\n                          class=\"btn btn-link px-2\"\r\n                          @click=\"decrementQuentity(item)\"\r\n                        >\r\n                          <i class=\"fas fa-minus\"></i>\r\n                        </button>\r\n\r\n                        <input\r\n                          id=\"form1\"\r\n                          min=\"1\"\r\n                          name=\"quantity\"\r\n                          :value=\"item.quantity\"\r\n                          type=\"number\"\r\n                          class=\"form-control form-control-sm\"\r\n                          style=\"width: 53px\"\r\n                        />\r\n\r\n                        <button\r\n                          class=\"btn btn-link px-2\"\r\n                          @click=\"addToCart(item)\"\r\n                        >\r\n                          <i class=\"fas fa-plus\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"align-middle border-bottom-0\">\r\n                      <p class=\"mb-0\" style=\"font-weight: 500\">\r\n                        {{ item.totalPrice }} DT\r\n                      </p>\r\n                    </td>\r\n                    <td class=\"align-middle border-bottom-0\">\r\n                      <img\r\n                        class=\"mb-0\"\r\n                        style=\"height: 25px\"\r\n                        src=\"../assets/icons8_close_50px.png\"\r\n                        @click=\"removeFromCart(item)\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"card shadow-2-strong mb-5 mb-lg-0\"\r\n            style=\"border-radius: 16px\"\r\n          >\r\n            <div class=\"card-body p-4\">\r\n              <div class=\"row\">\r\n                <div class=\"col-lg-4 col-xl-3\">\r\n                  <div\r\n                    class=\"d-flex justify-content-between\"\r\n                    style=\"font-weight: 500\"\r\n                  >\r\n                    <p class=\"mb-2\">Subtotal</p>\r\n                    <p class=\"mb-2\">{{ totalPrice - 7 }} DT</p>\r\n                  </div>\r\n\r\n                  <div\r\n                    class=\"d-flex justify-content-between\"\r\n                    style=\"font-weight: 500\"\r\n                  >\r\n                    <p class=\"mb-0\">Shipping</p>\r\n                    <p class=\"mb-0\">7 DT</p>\r\n                  </div>\r\n\r\n                  <hr class=\"my-4\" />\r\n\r\n                  <div\r\n                    class=\"d-flex justify-content-between mb-4\"\r\n                    style=\"font-weight: 500\"\r\n                  >\r\n                    <p class=\"mb-2\">Total (Shipping included)</p>\r\n                    <p class=\"mb-2\">{{ totalPrice }}DT</p>\r\n                  </div>\r\n\r\n                  <button\r\n                    @click=\"CheckOutProducts\"\r\n                    type=\"button\"\r\n                    v-if=\"CheckAuth\"\r\n                    class=\"btn btn-primary btn-block btn-lg\"\r\n                    data-bs-toggle=\"modal\"\r\n                    data-bs-target=\"#exampleModal\"\r\n                  >\r\n                    <div class=\"d-flex justify-content-between\">\r\n                      <span>Checkout</span>\r\n                    </div>\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    v-if=\"CheckAuth == null\"\r\n                    class=\"btn btn-primary btn-block btn-lg\"\r\n                    data-bs-toggle=\"modal\"\r\n                    data-bs-target=\"#exampleModal1\"\r\n                  >\r\n                    <div class=\"d-flex justify-content-between\">\r\n                      <span>Checkout</span>\r\n                    </div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          v-else\r\n          class=\"row d-flex justify-content-center align-items-center h-100\"\r\n        >\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\" class=\"h5\">Shopping Bag</th>\r\n              </tr>\r\n            </thead>\r\n          </table>\r\n          <br />\r\n          <div>\r\n            <center>Cart is empty</center>\r\n            <br />\r\n            <br />\r\n            <router-link to=\"/products\">\r\n              <img src=\"../assets/icons8_back_64px.png\" style=\"height: 37px\" />\r\n            </router-link>\r\n            <a style=\"width: auto\"> Continue shopping </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <!-- Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\" style=\"border: black\">\r\n        <div class=\"modal-header\" style=\"background: #242121; color: white\">\r\n          <div class=\"r\" style=\"display: flex; margin: auto\">\r\n            <img src=\"../assets/icons8_Done_64px_1.png\" style=\"height: 31px\" />\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n              Order will be processed\r\n            </h5>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-body\" style=\"display: flex\">\r\n          <div class=\"row g-0\">\r\n            <div class=\"col-md-4\">\r\n              <img\r\n                src=\"../assets/time-check-symbol_ready_timer_checkmark_countdown_compliance_done_reminder-512.webp\"\r\n                class=\"img-fluid rounded-start\"\r\n                alt=\"...\"\r\n              />\r\n            </div>\r\n            <div class=\"col\">\r\n              <p class=\"card-text\" style=\"margin-top: 62px; margin-left: 46px\">\r\n                Your order will be processed !\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            id=\"close\"\r\n            class=\"btn btn-dark\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Modal -->\r\n  <!-- Modal 2 -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal1\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\" style=\"border: black\">\r\n        <div class=\"modal-header\" style=\"background: #242121; color: white\">\r\n          <div class=\"r\" style=\"display: flex; margin: auto\">\r\n            <img src=\"../assets/icons8_close_26px.png\" style=\"height: 31px\" />\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n              You need to authentificate first\r\n            </h5>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-body\" style=\"display: flex\">\r\n          <div class=\"row g-0\">\r\n            <div class=\"col-md-4\">\r\n              <img\r\n                src=\"../assets/R.png\"\r\n                class=\"img-fluid rounded-start\"\r\n                alt=\"...\"\r\n              />\r\n            </div>\r\n            <div class=\"col\">\r\n              <p class=\"card-text\" style=\"margin: revert; margin-left: 29px\">\r\n                You need to authentificate first\r\n              </p>\r\n\r\n              <div class=\"container row\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-dark\"\r\n                  @click=\"CreateAccount\"\r\n                >\r\n                  Create an account\r\n                </button>\r\n                <br />\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-dark\"\r\n                  @click=\"Login\"\r\n                >\r\n                  Login\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            id=\"close1\"\r\n            class=\"btn btn-dark\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Modal 2 -->\r\n</template>\r\n<script>\r\nimport \"../Firebase\";\r\nimport router from \"../router\";\r\n// @click=\"CheckOutProducts\"\r\nimport {\r\n  addDoc,\r\n  collection,\r\n  query,\r\n  getFirestore,\r\n  onSnapshot,\r\n} from \"firebase/firestore\";\r\nconst db = getFirestore();\r\nconst q = query(collection(db, \"Checkout\"));\r\nconst authusers = query(collection(db, \"users\"));\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nvar today = new Date();\r\nvar now_date =\r\n  today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate();\r\nconst auth = getAuth();\r\nexport default {\r\n  name: \"CartView\",\r\n  data() {\r\n    return {\r\n      uid: localStorage.getItem(\"uidUser\"),\r\n      CheckAuth: null,\r\n    };\r\n  },\r\n  computed: {\r\n    totalPrice() {\r\n      let total = 0;\r\n\r\n      for (let item of this.$store.state.cart) {\r\n        total += item.totalPrice;\r\n      }\r\n      total = total + 7;\r\n      return total.toFixed(2);\r\n    },\r\n  },\r\n  methods: {\r\n    addToCart(item) {\r\n      this.$store.commit(\"addToCart\", item);\r\n\r\n      console.log(item);\r\n    },\r\n    removeFromCart(item) {\r\n      this.$store.commit(\"removeFromCart\", item);\r\n    },\r\n    decrementQuentity(item) {\r\n      this.$store.commit(\"decrementQuentity\", item);\r\n    },\r\n    CheckOutProducts() {\r\n      onSnapshot(authusers, (querySnapshot) => {\r\n        querySnapshot.forEach((doc) => {\r\n          if (doc.data().uid == this.uid) {\r\n            addDoc(\r\n              q,\r\n\r\n              {\r\n                name: doc.data().name,\r\n                number: doc.data().number,\r\n                address: doc.data().address,\r\n                date: now_date,\r\n                total: this.totalPrice,\r\n                cart: this.$store.state.cart,\r\n              }\r\n            ).then(() => {\r\n              this.$store.commit(\"resetCart\");\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    CreateAccount() {\r\n      router.push(\"/signin\");\r\n      document.getElementById(\"close1\").click();\r\n    },\r\n    Login() {\r\n      router.push(\"/login\");\r\n      document.getElementById(\"close1\").click();\r\n    },\r\n  },\r\n  created() {\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        this.CheckAuth = user;\r\n      } else {\r\n        this.CheckAuth = null;\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}